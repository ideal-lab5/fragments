# Round Contract

## API

#### constructor()

- parameters:
  - `fragment_details: Vec<FragmentDetails>`, a list of `FragmentDetails`
  - `mmr_root: Vec<u8>`, the root of the MMR, of which each leaf represents a Fragment
  - `fa_nft: AccountId`, the account ID of the deployed Fragment Acknowledge NFT contract
- returns: `Self`

#### get_fragments()

- parameters: none
- returns: `Vec<FragmentDetails>`, a list of `FragmentDetails`

#### claim_fragment()

- parameters:
  - `proof: Proof<Leaf, MergeLeaves>`, the proof of inclusion for the fragment in the MMR
  - `pos: u64`, the node position of the leaf that represents the fragment in the MMR
  - `hash: Vec<u8>`, the hash of the fragment
- returns: `Result<(), Error>`

#### claim_reward()

TODO

## Structs

#### FragmentDetails

- `cid`: an external identifier (e.g. an IPFS CID)
- `release_block`: the block number when the fragment payload can be decrypted

#### Proof

This is just a wrapper around `MerkleProof` that is generated by [ckb-merkle-mountain-range](https://github.com/nervosnetwork/merkle-mountain-range/tree/master).

## Examples

#### claim_fragment

See this test case for an example of how to interact with the `claim_fragment` function:

https://github.com/ideal-lab5/fragments/blob/1daa95b1edb285440b36299f2ee47c8c20c1c8d9/contracts/round/lib.rs#L216-L284
